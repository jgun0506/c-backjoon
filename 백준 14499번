#define _CRT_SECURE_NO_WARNINGS
#pragma comment(linker, "/STACK:28388608")   // 8MB 스택메모리늘려줌
#include <stdio.h>
#include <stdlib.h>    // srand, rand 함수가 선언된 헤더 파일
#include <string.h>
#include <stdbool.h>
#include <stddef.h>
#include <math.h>
int x, y;//주사위의 현위치
int n, m;
int board[20][20];
int dice[4][3];

void move(int direct) {
    int temp[4][3];

    memcpy(temp, dice, sizeof(dice));

    if (direct == 1) {//동쪽
        if (y < m-1) {
            y++;
            temp[1][0] = dice[1][1];
            temp[1][1] = dice[1][2];
            temp[1][2] = dice[3][1];
            temp[3][1] = dice[1][0];
            if (board[x][y] == 0) {
                board[x][y] = temp[1][1];
            }
            else {
                temp[1][1] = board[x][y];
                board[x][y] = 0;
            }
            printf("%d\n", temp[3][1]);
        }
    }
    else if (direct == 2) {//서쪽
        if (y > 0) {
            y--;
            temp[1][0] = dice[3][1];
            temp[1][1] = dice[1][0];
            temp[1][2] = dice[1][1];
            temp[3][1] = dice[1][2];
            if (board[x][y] == 0) {
                board[x][y] = temp[1][1];
            }
            else {
                temp[1][1] = board[x][y];
                board[x][y] = 0;
            }
            printf("%d\n", temp[3][1]);
        }
    }
    else if (direct == 3) {//북쪽
        if (x > 0) {
            x--;
            temp[1][1] = dice[0][1];
            temp[2][1] = dice[1][1];
            temp[3][1] = dice[2][1];
            temp[0][1] = dice[3][1];
            if (board[x][y] == 0) {
                board[x][y] = temp[1][1];
            }
            else {
                temp[1][1] = board[x][y];
                board[x][y] = 0;
            }
            printf("%d\n", temp[3][1]);
        }
    }
    else if (direct == 4) {//남쪽
        if (x < n - 1) {
            x++;
            temp[0][1] = dice[1][1];
            temp[1][1] = dice[2][1];
            temp[2][1] = dice[3][1];
            temp[3][1] = dice[0][1];
            if (board[x][y] == 0) {
                board[x][y] = temp[1][1];
            }
            else {
                temp[1][1] = board[x][y];
                board[x][y] = 0;
            }
            printf("%d\n", temp[3][1]);
        }
    }
    memcpy(dice, temp, sizeof(temp));
}


int main(){
    int k;

    scanf("%d %d %d %d %d", &n, &m, &x, &y, &k);

    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            scanf("%d", &board[i][j]);
        }
    }
  
    int direction;
    for (int i = 0; i < k; i++) {
        scanf("%d", &direction);
        move(direction);
    }

    return 0;
}
