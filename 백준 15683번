#define _CRT_SECURE_NO_WARNINGS
#pragma comment(linker, "/STACK:28388608")   // 8MB 스택메모리늘려줌
#include <stdio.h>
#include <stdlib.h>    // srand, rand 함수가 선언된 헤더 파일
#include <string.h>
#include <stdbool.h>
#include <stddef.h>

int n, m;
int room[10][10];
int cctv_count;
int min_sagac = 64;

struct CCTV {
    int x;
    int y;
    int kind;
};

struct CCTV p[64];

void see(int x,struct CCTV cctv) {//감시영역 색칠해주는함수
    if (x == 0) {//동쪽으로 색칠
        for (int i = cctv.x + 1; i < m; i++) {
            if (room[cctv.y][i] == 6) 
                break;
            room[cctv.y][i] = -1;
        }
    }
    else if (x == 1) {//남쪽으로 색칠
        for (int i = cctv.y + 1; i < n; i++) {
            if (room[i][cctv.x] == 6) 
                break;            
            room[i][cctv.x] = -1;
        }
    }
    else if (x == 2) {//서쪽으로색칠
        for (int i = cctv.x - 1; i >= 0; i--) {
            if (room[cctv.y][i] == 6) 
                break;           
            room[cctv.y][i] = -1;
        }
    }
    else if (x == 3) {//북쪽으로색칠
        for (int i = cctv.y - 1; i >= 0; i--) {
            if (room[i][cctv.x] == 6) 
                break;          
            room[i][cctv.x] = -1;
        }
    }
    return;
}
void func(int k) {
    if (k == cctv_count) {
        int sagac = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                if (room[i][j] == 0) 
                    sagac++;               
            }
        }
        if (min_sagac > sagac) 
            min_sagac = sagac;      
        return;
    }
    for (int i = 0; i < 4; i++) {//동서남북 돌려줌
        int tmp[10][10];//색칠하기전 상태를 저장
        memcpy(tmp, room, sizeof(room));
        if (p[k].kind == 1) {
            see(i, p[k]);
        }
        else if (p[k].kind == 2) {
            see(i, p[k]);
            see((2 + i) % 4, p[k]);
        }
        else if (p[k].kind == 3) {
            see(i, p[k]);
            see((3 + i) % 4, p[k]);
        }
        else if (p[k].kind == 4) {
            see(i, p[k]);
            see((2 + i) % 4, p[k]);
            see((3 + i) % 4, p[k]);
        }
        else if (p[k].kind == 5) {
            see(i, p[k]);
            see((1 + i) % 4, p[k]);
            see((2 + i) % 4, p[k]);
            see((3 + i) % 4, p[k]);
        }
        func(k + 1);
        memcpy(room, tmp, sizeof(tmp));//색칠하기전 상태로 복구
    }
}
int main()
{
    scanf("%d %d", &n, &m);
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < m; j++) {
            scanf("%d", &room[i][j]);
            if (room[i][j] > 0 && room[i][j] < 6) {
                p[cctv_count] = (struct CCTV){ j,i,room[i][j] };
                cctv_count++;
            }
        }
    }
    func(0);
    printf("%d", min_sagac);
    return 0;
}
